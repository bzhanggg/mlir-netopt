add_subdirectory(dialect)

get_property(dialect_libs GLOBAL PROPERTY MLIR_DIALECT_LIBS)
get_property(conversion_libs GLOBAL PROPERTY MLIR_CONVERSION_LIBS)

include_directories(${CMAKE_CURRENT_BINARY_DIR})
include_directories(${CMAKE_CURRENT_SOURCE_DIR})

# create compiler executable
add_llvm_executable(spmcc spmcc.cpp)

llvm_update_compile_flags(spmcc)
target_link_libraries(
    spmcc
    PRIVATE MLIRSpmc
            MLIRAnalysis
            MLIRIR
            MLIRParser
            MLIRPass
)

mlir_check_all_link_libraries(spmcc)